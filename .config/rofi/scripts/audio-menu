#!/usr/bin/env bash

declare -A options
options[hdmi]="蓼  HDMI"
options[headphones]="  Headphones"
options[volume_high]="  Volume +5%"
options[volume_low]="  Volume -5%"

get_options() {
    for entry in "${options[@]}"
    do
        echo "$entry"
    done
}

main() {
    # Get choice from rofi
    choice=$( (get_options) | sort | rofi -dmenu -i -theme ui_theme -p '')

    # If user has not picked anything, exit
    if [[ -z "${choice// }" ]]; then
        exit 1
    fi

    # Run the selected command
    case $choice in
        "${options[hdmi]}")
            pactl set-default-sink alsa_output.pci-0000_01_00.1.hdmi-stereo-extra1
            ;;

        "${options[headphones]}")
            pactl set-default-sink alsa_output.pci-0000_00_1f.3.analog-stereo
            ;;

        "${options[volume_high]}")
            output="$(pactl list sinks short | grep "RUNNING" | awk '{print $2}')"
            pactl set-sink-volume $output +5%
            ;;

        "${options[volume_low]}")
            output="$(pactl list sinks short | grep "RUNNING" | awk '{print $2}')"
            pactl set-sink-volume $output -5%
            ;;
    esac

    set -e
}

main $1 &

exit 0

!/bin/bash
