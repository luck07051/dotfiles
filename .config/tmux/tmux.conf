#==================== BISIC ====================#
# No esc delay
set -sg escape-time 10
# Use true colors
set -g default-terminal "alacritty"
set -ga terminal-overrides ",alacritty:RGB"
# Enable mouse
set -g mouse on
# Start numbering at 1
set -g base-index 1
# increase scroll history size
set -g history-limit 10000


#==================== BINDINGS ====================#
# Set prefix to ctrl-space
unbind C-b
set -g prefix C-Space

# kill
bind-key d kill-pane
bind-key D kill-window

# Use vim key to switch panes
bind-key j select-pane -D
bind-key k select-pane -U
bind-key h select-pane -L
bind-key l select-pane -R

# swap panes
bind-key -r > swap-pane -D
bind-key -r < swap-pane -U

# Split window
bind-key s split-window -h
bind-key v split-window -v

# New window
bind-key t new-window

# Reload
bind-key r source-file $XDG_CONFIG_HOME/tmux/tmux.conf



#==================== STATUS BAR ====================#
#set -g status off
set -g status-justify left
set -g status-left " [#S] | "
set -g status-left-length 15
set -g status-right "#{?client_prefix,#[fg=black bg=magenta] Prefix #[fg=default bg=default] ,} %a %b %d  %H:%M "

setw -g window-status-current-format '-#I:#W- '
setw -g window-status-format '#I:#W '

# Let Vim and Tmux work together {{{
is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"

bind-key -n 'M-h' if-shell "$is_vim" 'send-keys M-h' { if -F '#{pane_at_left}'   '' 'select-pane -L' }
bind-key -n 'M-j' if-shell "$is_vim" 'send-keys M-j' { if -F '#{pane_at_bottom}' '' 'select-pane -D' }
bind-key -n 'M-k' if-shell "$is_vim" 'send-keys M-k' { if -F '#{pane_at_top}'    '' 'select-pane -U' }
bind-key -n 'M-l' if-shell "$is_vim" 'send-keys M-l' { if -F '#{pane_at_right}'  '' 'select-pane -R' }

bind-key -T copy-mode-vi 'M-h' if -F '#{pane_at_left}'   '' 'select-pane -L'
bind-key -T copy-mode-vi 'M-j' if -F '#{pane_at_bottom}' '' 'select-pane -D'
bind-key -T copy-mode-vi 'M-k' if -F '#{pane_at_top}'    '' 'select-pane -U'
bind-key -T copy-mode-vi 'M-l' if -F '#{pane_at_right}'  '' 'select-pane -R'

bind -n 'M-H' if-shell "$is_vim" 'send-keys M-H' 'resize-pane -L 4'
bind -n 'M-J' if-shell "$is_vim" 'send-keys M-J' 'resize-pane -D 2'
bind -n 'M-K' if-shell "$is_vim" 'send-keys M-K' 'resize-pane -U 2'
bind -n 'M-L' if-shell "$is_vim" 'send-keys M-L' 'resize-pane -R 4'

bind-key -T copy-mode-vi M-H resize-pane -L 4
bind-key -T copy-mode-vi M-J resize-pane -D 2
bind-key -T copy-mode-vi M-K resize-pane -U 2
bind-key -T copy-mode-vi M-L resize-pane -R 4
# }}}

#==================== COLORS ====================#
set-option -g status-style bg=default
#set -g status-style bg=black
set -g message-style bg=black
set -g message-command-style bg=black
set -g mode-style fg=black,bg=green

# pane border colors
set -g pane-border-style        fg='#585858'
set -g pane-active-border-style fg=magenta

# window title colors
set -g window-status-current-style fg=magenta,bg=default,bold
set -g window-status-style fg=brightwhite,bg=default




#==================== PLUGINS ====================#
# https://github.com/tmux-plugins/tpm
#set -g @plugin 'tmux-plugins/tpm'

# display prefix
#set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
# press `prefix + tab` to start.
# tab to insert, enter to copy
#set -g @plugin 'laktak/extrakto'

#set -g @plugin 'tmux-plugins/tmux-resurrect'
#set -g @plugin 'tmux-plugins/tmux-continuum'
#set -g @resurrect-dir '~/.local/share/tmux/resurrect'
