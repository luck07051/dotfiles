#!/bin/sh

# set wacom area
if xinput list | grep 'Wacom'; then
  xsetwacom set "Wacom One by Wacom S Pen stylus" Area 15200 9500 10132 6332
fi

# Remap caps lock to Ctrl
setxkbmap -option ctrl:nocaps

# Set screen to 144 rate
xrandr --output HDMI-0 --mode 1920x1080 --rate 144.00

# No screen saver
xset s off
xset -dpms

# Startup app
pgrep "$BROWSER" > /dev/null || $BROWSER &
syncthing serve --no-browser &

while true; do
  xrdb -merge "$XDG_CONFIG_HOME"/X11/xresources
  setwallpaper &


  pidof -q dunst     || dunst &
  pidof -q unclutter || unclutter &
  pidof -q xcompmgr  || xcompmgr -n &
  pidof -q fcitx5    || fcitx5 -d &

  killall entr >/dev/null 2>&1; entr-list &

  killall dwmblocks >/dev/null 2>&1; dwmblocks &
  (sleep 2s; kill -55 "$(pidof dwmblocks)") &

  dwm

done
