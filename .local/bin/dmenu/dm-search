#!/bin/sh

# Search stuff.

dmenu="${DMENU:-dmenu -i}"

# always print query if using fmenu
[ "${dmenu%% *}" = 'fmenu' ] && dmenu="$dmenu -f --bind=enter:print-query"

selected="$( case ${dmenu%% *} in
	fmenu) search-query | awk -F'\t' "{print \$1 \"[38;5;246m\t : \" \$2 \"[0m\"}" ;;
	*) search-query | awk -F'\t' "{print \$1 \"\t : \" \$2}" ;;
esac | column -t -s "$(printf '\t')" | $dmenu -p "SEARCH")"

[ -z "$selected" ] && exit

xdg-open "$(search-query "$selected")"
