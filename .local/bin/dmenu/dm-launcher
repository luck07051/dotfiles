#!/bin/sh
# TODO: bookmark

dmenu="${DMENU:-dmenu -i}"
term="${TERMINAL-st} -e sh -c"

dmenu_path() {
	echo "$PATH:$XDG_DATA_HOME/applications" | tr ':' '\n' | sort | uniq |
		xargs ls | sed '/\//d ; /^$/d' | sort
}

run="$(dmenu_path | $dmenu -p "RUN" "$@")"

case "$run" in
	# run command in terminal if end with ';'
	*\;) $term "${run%\;}" ;;

	*.desktop) gtk-launch "$run" ;;

	*) $run ;;
esac
