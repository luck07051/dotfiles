#!/bin/sh

# Syncs repositories and downloads updates, meant to be run as a cronjob.

cleanup(){
	rm -r /tmp/sb-repo-syncing
	exit
}
trap cleanup INT TERM

sync_cmd="${1:-${PKGMAN:-pacman} -Syyw --noconfirm}"
sb_update_cmd="$HOME/.local/bin/statusbar/sb-update sb-pacman"

touch /tmp/sb-repo-syncing
$sb_update_cmd

# $sync_cmd || notify-send "ðŸ“¦ Repository Sync" "Error downloading updates."
$sync_cmd

rm /tmp/sb-repo-syncing
$sb_update_cmd
