#!/bin/sh

# Syncs repositories and downloads updates, meant to be run as a cronjob.
PKGMAN=${PKGMAN:-pacman}

$PKGMAN -Syyuw --noconfirm ||
	notify-send "Error downloading updates." "Check your internet connection, if $PKGMAN is already running, or run update manually to see errors."

# update statusbar
kill -61 "$(pidof dwmblocks)"

if $PKGMAN -Qu | grep -v "\[ignored\]"
then
	notify-send "ðŸ“¦ Repository Sync" "Updates available. Click statusbar icon (ðŸ“¦) for update."
else
	notify-send "ðŸ“¦ Repository Sync" "Sync complete. No new packages for update."
fi
