#!/bin/sh

option="$(cat <<EOF
 -> Chinese ;; :zh-TW
 -> English ;; :en
 -> Japanese ;; :ja
EOF
)"
default_opt=":zh-TW"


chosen="$(echo "$option" | sed 's/\s*;;.*$//' | dmenu -i -l 20 -p "TRANS")"
[ -z "$chosen" ] && exit 1

tr_arg="$(echo "$option" | grep -F "$chosen" | sed 's/^.*;;\s*//')"
[ -z "$tr_arg" ] && text="$chosen" && tr_arg="$default_opt"

[ -z "$text" ] && text="$(dmenu -p "ENTER TEXT" </dev/null)"
[ -z "$text" ] && text="$(xclip -o)"

trans "$tr_arg" "$text" | sed 's/.\[[0-9]*m//g' | dmenu -l 50 -p "TRANS"
# output="$(trans "$tr_arg" "$text" | sed 's/.\[[0-9]*m//g' | dmenu -l 50 -p "TRANS")"
# [ -n "$output" ] && echo "$output" | xclip -i -selection clipboard
